<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kurye & Ä°ÅŸletme Takip</title>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

<style>
body{background:#0f172a;color:#e5e7eb;font-family:sans-serif;margin:0;padding:10px}
.tabs{display:flex;gap:6px}
.tabs button{flex:1;padding:10px;border:none;border-radius:6px;background:#334155;color:#fff}
.tabs button.active{background:#3b82f6}
.section{margin-top:15px}
input,button{width:100%;padding:8px;margin:4px 0;border:none;border-radius:5px}
input{background:#334155;color:#fff}
button{background:#22c55e;color:#000;font-weight:bold}
button.warn{background:#facc15}
table{width:100%;border-collapse:collapse;font-size:12px;margin-top:10px}
th,td{border-bottom:1px solid #334155;padding:6px;text-align:center}

/* DURUM Ä°KONLARI */
.dot{display:inline-block;width:12px;height:12px;border-radius:50%}
.red{background:#ef4444}
.green{background:#22c55e}
.blue{background:#3b82f6}

/* KÃœÃ‡ÃœK BUTONLAR */
.btnMini{
display:inline-flex;
align-items:center;
justify-content:center;
width:26px;
height:26px;
border-radius:50%;
font-size:14px;
cursor:pointer;
margin:0 2px;
}
.edit{background:#38bdf8;color:#000}
.del{background:#ef4444;color:#fff}

.footerBtn{margin-top:15px}
small{color:#94a3b8}
</style>
</head>

<body>

<div class="tabs">
  <button id="kuryeTab" class="active" onclick="showTab('kurye')">Kurye</button>
  <button id="isletmeTab" onclick="showTab('isletme')">Ä°ÅŸletme</button>
</div>

<!-- KURYE -->
<div id="kurye" class="section">
<h3>Kurye GÃ¼nlÃ¼k KayÄ±t</h3>
<input id="k_ad" placeholder="Kurye adÄ±">
<input id="k_paket" type="number" placeholder="Paket sayÄ±sÄ±">
<input id="k_ucret" type="number" placeholder="Paket Ã¼creti">
<input id="k_odeme" type="number" placeholder="Ã–deme (varsa)">
<button onclick="ekleKurye()">Kaydet</button>

<div id="kuryeToplam"></div>

<table>
<thead>
<tr>
<th></th><th>Tarih</th><th>Kurye</th><th>Paket</th>
<th>Ãœcret</th><th>Tutar</th><th>Ã–deme</th><th>Bakiye</th><th></th>
</tr>
</thead>
<tbody id="kuryeListe"></tbody>
</table>

<button class="warn footerBtn" onclick="gunSonu()">GÃœN SONU</button>
</div>

<!-- Ä°ÅLETME -->
<div id="isletme" class="section" style="display:none">
<h3>Ä°ÅŸletme GÃ¼nlÃ¼k KayÄ±t</h3>
<input id="i_ad" placeholder="Ä°ÅŸletme adÄ±">
<input id="i_paket" type="number" placeholder="Paket">
<input id="i_tel" type="number" placeholder="Paket Ã¼creti">
<input id="i_odeme" type="number" placeholder="Ã–deme">
<button onclick="ekleIsletme()">Kaydet</button>

<table>
<thead>
<tr>
<th></th><th>Tarih</th><th>Ä°ÅŸletme</th><th>Paket</th>
<th>Tel</th><th>Tutar</th><th>Ã–deme</th><th>Bakiye</th><th></th>
</tr>
</thead>
<tbody id="isletmeListe"></tbody>
</table>

<button class="warn footerBtn" onclick="gunSonu()">GÃœN SONU</button>
</div>

<script>
let kuryeData=JSON.parse(localStorage.getItem("kurye"))||[]
let isletmeData=JSON.parse(localStorage.getItem("isletme"))||[]

function showTab(t){
document.getElementById("kurye").style.display=t==="kurye"?"block":"none"
document.getElementById("isletme").style.display=t==="isletme"?"block":"none"
kuryeTab.classList.toggle("active",t==="kurye")
isletmeTab.classList.toggle("active",t==="isletme")
}

function tarih(){return new Date().toLocaleDateString("tr-TR")}
function durum(b){
if(b>0)return'<span class="dot blue"></span>'
if(b<0)return'<span class="dot red"></span>'
return'<span class="dot green"></span>'
}

/* KURYE */
function ekleKurye(){
let p=+k_paket.value||0,u=+k_ucret.value||0,o=+k_odeme.value||0
kuryeData.push({t:tarih(),ad:k_ad.value,p,u,tutar:p*u,odeme:o,bakiye:p*u-o})
kaydet()
}

function kuryeListele(){
let h="",tp=0,net=0
kuryeData.forEach((x,i)=>{
tp+=x.p;net+=x.bakiye
h+=`<tr>
<td>${durum(x.bakiye)}</td>
<td>${x.t}</td><td>${x.ad}</td><td>${x.p}</td>
<td>${x.u}</td><td>${x.tutar}</td><td>${x.odeme}</td><td>${x.bakiye}</td>
<td>
<span class="btnMini edit" onclick="duzenleKurye(${i})">âœï¸</span>
<span class="btnMini del" onclick="silKurye(${i})">ğŸ—‘</span>
</td></tr>`
})
kuryeListe.innerHTML=h
kuryeToplam.innerHTML=`<small>Toplam Paket: ${tp} | Net: ${net}</small>`
}

/* Ä°ÅLETME */
function ekleIsletme(){
let p=+i_paket.value||0,tel=+i_tel.value||0,o=+i_odeme.value||0
isletmeData.push({t:tarih(),ad:i_ad.value,p,tel,tutar:p*tel,odeme:o,bakiye:p*tel-o})
kaydet()
}

function isletmeListele(){
let h=""
isletmeData.forEach((x,i)=>{
h+=`<tr>
<td>${durum(x.bakiye)}</td>
<td>${x.t}</td><td>${x.ad}</td><td>${x.p}</td>
<td>${x.tel}</td><td>${x.tutar}</td><td>${x.odeme}</td><td>${x.bakiye}</td>
<td>
<span class="btnMini edit" onclick="duzenleIsletme(${i})">âœï¸</span>
<span class="btnMini del" onclick="silIsletme(${i})">ğŸ—‘</span>
</td></tr>`
})
isletmeListe.innerHTML=h
}

/* DÃœZENLE / SÄ°L */
function silKurye(i){if(confirm("Silinsin mi?")){kuryeData.splice(i,1);kaydet()}}
function silIsletme(i){if(confirm("Silinsin mi?")){isletmeData.splice(i,1);kaydet()}}

function duzenleKurye(i){
let x=kuryeData[i]
x.p=+prompt("Paket",x.p)
x.u=+prompt("Ãœcret",x.u)
x.odeme=+prompt("Ã–deme",x.odeme)
x.tutar=x.p*x.u
x.bakiye=x.tutar-x.odeme
kaydet()
}

function duzenleIsletme(i){
let x=isletmeData[i]
x.p=+prompt("Paket",x.p)
x.tel=+prompt("Tel",x.tel)
x.odeme=+prompt("Ã–deme",x.odeme)
x.tutar=x.p*x.tel
x.bakiye=x.tutar-x.odeme
kaydet()
}

/* GÃœN SONU */
function gunSonu(){
if(!confirm("GÃ¼n sonu alÄ±nacak. Emin misin?"))return
let wb=XLSX.utils.book_new()
let d=[["KURYELER"],["Tarih","Ad","Paket","Ãœcret","Tutar","Ã–deme","Bakiye"]]
kuryeData.forEach(x=>d.push([x.t,x.ad,x.p,x.u,x.tutar,x.odeme,x.bakiye]))
d.push([])
d.push(["Ä°ÅLETMELER"])
d.push(["Tarih","Ad","Paket","Tel","Tutar","Ã–deme","Bakiye"])
isletmeData.forEach(x=>d.push([x.t,x.ad,x.p,x.tel,x.tutar,x.odeme,x.bakiye]))
let ws=XLSX.utils.aoa_to_sheet(d)
XLSX.utils.book_append_sheet(wb,ws,tarih())
XLSX.writeFile(wb,"kurye_isletme_takip.xlsx")
kuryeData=kuryeData.filter(x=>x.bakiye!=0)
isletmeData=isletmeData.filter(x=>x.bakiye!=0)
kaydet()
}

function kaydet(){
localStorage.setItem("kurye",JSON.stringify(kuryeData))
localStorage.setItem("isletme",JSON.stringify(isletmeData))
kuryeListele()
isletmeListele()
}
kaydet()
</script>
</body>
</html>
