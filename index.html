<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kurye & Ä°ÅŸletme Takip</title>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

<style>
body{
  background:#0f172a;color:#f1f5f9;font-family:sans-serif;margin:0;padding:12px
}
h2{font-size:16px;color:#38bdf8;margin:10px 0}
.tabs{display:flex;gap:5px}
.tabs button{flex:1}
.section{border-top:1px solid #334155;margin-top:10px;padding-top:10px}
input,button{
  width:100%;padding:10px;margin:4px 0;border:none;border-radius:6px;
  background:#334155;color:#f1f5f9;font-size:14px
}
button{background:#3b82f6;font-weight:bold}
button.warn{background:#facc15;color:#000}
button.danger{background:#ef4444}
table{width:100%;font-size:13px;border-collapse:collapse;margin-top:5px}
th,td{border-bottom:1px solid #334155;padding:6px;text-align:center}
.status{width:10px;height:10px;border-radius:50%;display:inline-block}
.red{background:#ef4444}
.green{background:#22c55e}
.blue{background:#3b82f6}
.actions button{margin:2px 0}
.hidden{display:none}
</style>
</head>

<body>

<div class="tabs">
  <button onclick="sekme('kurye')">ğŸš´ Kurye</button>
  <button onclick="sekme('isletme')">ğŸª Ä°ÅŸletme</button>
</div>

<!-- KURYE -->
<div id="kurye">
  <h2>Kurye GiriÅŸi</h2>
  <input id="kAd" placeholder="Kurye AdÄ±">
  <input id="kPaket" type="number" placeholder="Paket SayÄ±sÄ±">
  <input id="kUcret" type="number" placeholder="Paket Ãœcreti">
  <button onclick="kuryeEkle()">Ekle</button>

  <table>
    <thead>
      <tr><th>Durum</th><th>Kurye</th><th>Paket x Ãœcret</th><th>Tutar</th><th>Ä°ÅŸlem</th></tr>
    </thead>
    <tbody id="kuryeListe"></tbody>
  </table>
</div>

<!-- Ä°ÅLETME -->
<div id="isletme" class="hidden">
  <h2>Ä°ÅŸletme GiriÅŸi</h2>
  <input id="iAd" placeholder="Ä°ÅŸletme AdÄ±">
  <input id="iPaket" type="number" placeholder="Paket SayÄ±sÄ±">
  <input id="iUcret" type="number" placeholder="Paket Ãœcreti">
  <button onclick="isletmeEkle()">Ekle</button>

  <table>
    <thead>
      <tr><th>Durum</th><th>Ä°ÅŸletme</th><th>Paket x Ãœcret</th><th>Tutar</th><th>Ä°ÅŸlem</th></tr>
    </thead>
    <tbody id="isletmeListe"></tbody>
  </table>
</div>

<div class="section">
  <button class="warn" onclick="gunSonu()">ğŸ“¤ GÃ¼n Sonu & Excel</button>
</div>

<script>
let kuryeler=[], isletmeler=[], excelData=[];

function sekme(x){
  document.getElementById("kurye").classList.toggle("hidden",x!=="kurye");
  document.getElementById("isletme").classList.toggle("hidden",x!=="isletme");
}

function kuryeEkle(){
  let ad=kAd.value, p=+kPaket.value, u=+kUcret.value;
  if(!ad||!p||!u)return;
  kuryeler.push({ad,p,u,top:p*u});
  listele();
}

function isletmeEkle(){
  let ad=iAd.value, p=+iPaket.value, u=+iUcret.value;
  if(!ad||!p||!u)return;
  isletmeler.push({ad,p,u,top:p*u});
  listele();
}

function listele(){
  kuryeListe.innerHTML="";
  kuryeler.forEach((k,i)=>{
    kuryeListe.innerHTML+=`
    <tr>
      <td><span class="status blue"></span></td>
      <td>${k.ad}</td>
      <td>${k.p} x ${k.u}</td>
      <td>${k.top}</td>
      <td class="actions">
        <button class="danger" onclick="kuryeler.splice(${i},1);listele()">Sil</button>
      </td>
    </tr>`;
  });

  isletmeListe.innerHTML="";
  isletmeler.forEach((k,i)=>{
    isletmeListe.innerHTML+=`
    <tr>
      <td><span class="status red"></span></td>
      <td>${k.ad}</td>
      <td>${k.p} x ${k.u}</td>
      <td>${k.top}</td>
      <td class="actions">
        <button class="danger" onclick="isletmeler.splice(${i},1);listele()">Sil</button>
      </td>
    </tr>`;
  });
}

function gunSonu(){
  let tarih=new Date().toLocaleDateString("tr-TR");
  let sheet=[];

  kuryeler.forEach(k=>{
    sheet.push({Tarih:tarih,Tip:"Kurye",Ad:k.ad,Paket:k.p,Ucret:k.u,Tutar:k.top});
  });
  isletmeler.forEach(i=>{
    sheet.push({Tarih:tarih,Tip:"Ä°ÅŸletme",Ad:i.ad,Paket:i.p,Ucret:i.u,Tutar:i.top});
  });

  let wb=XLSX.utils.book_new();
  let ws=XLSX.utils.json_to_sheet(sheet);
  XLSX.utils.book_append_sheet(wb,ws,tarih);
  XLSX.writeFile(wb,"kurye_isletme_takip.xlsx");

  kuryeler=[];isletmeler=[];
  listele();
}
</script>

</body>
</html>
