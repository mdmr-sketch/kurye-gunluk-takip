<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kurye & Ä°ÅŸletme Takip</title>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

<style>
body{background:#0f172a;color:#e5e7eb;font-family:sans-serif;margin:0;padding:10px}
.tabs{display:flex;gap:6px;margin-bottom:10px}
.tabs button{flex:1;padding:10px;border:none;border-radius:6px;font-weight:bold}
.active{background:#3b82f6;color:#fff}
.passive{background:#334155;color:#fff}

.section{border-bottom:1px solid #334155;padding-bottom:10px;margin-bottom:10px}
input,button{width:100%;padding:8px;margin:4px 0;border-radius:6px;border:none}
input{background:#334155;color:#fff}
button{background:#22c55e;color:#000;font-weight:bold}

.row{display:flex;justify-content:space-between;align-items:center;padding:6px 0}
.small{padding:4px 6px;font-size:12px}

.red{color:#ef4444}
.green{color:#22c55e}
.blue{color:#38bdf8}
</style>
</head>

<body onload="loadData()">

<div class="tabs">
  <button id="tKurye" class="active" onclick="showTab('kurye')">Kurye</button>
  <button id="tIsletme" class="passive" onclick="showTab('isletme')">Ä°ÅŸletme</button>
</div>

<!-- KURYE -->
<div id="kurye">
  <div class="section">
    <h3>Kurye DaÄŸÄ±tÄ±m GiriÅŸi</h3>
    <input id="k_ad" placeholder="Kurye AdÄ±">
    <input id="k_paket" type="number" placeholder="Paket">
    <input id="k_ucret" type="number" placeholder="Paket Ãœcreti">
    <button onclick="kuryeEkle()">Ekle</button>
  </div>

  <div class="section">
    <h3>Kurye Ã–demesi</h3>
    <input id="k_odeme_ad" placeholder="Kurye AdÄ±">
    <input id="k_odeme" type="number" placeholder="Ã–deme">
    <button onclick="kuryeOdeme()">Ã–deme Gir</button>
  </div>

  <h3>Kurye Listesi</h3>
  <div id="kuryeList"></div>

  <h3>ðŸ“¦ GÃ¼nlÃ¼k Kurye DaÄŸÄ±tÄ±mÄ±: <span id="kuryeGunluk">0</span> â‚º</h3>
</div>

<!-- Ä°ÅžLETME -->
<div id="isletme" style="display:none">
  <div class="section">
    <h3>Ä°ÅŸletme DaÄŸÄ±tÄ±m GiriÅŸi</h3>
    <input id="i_ad" placeholder="Ä°ÅŸletme AdÄ±">
    <input id="i_paket" type="number" placeholder="Paket">
    <input id="i_ucret" type="number" placeholder="Paket Ãœcreti">
    <button onclick="isletmeEkle()">Ekle</button>
  </div>

  <div class="section">
    <h3>Ä°ÅŸletme Ã–demesi</h3>
    <input id="i_odeme_ad" placeholder="Ä°ÅŸletme AdÄ±">
    <input id="i_odeme" type="number" placeholder="Ã–deme">
    <button onclick="isletmeOdeme()">Ã–deme Al</button>
  </div>

  <h3>Ä°ÅŸletme Listesi</h3>
  <div id="isletmeList"></div>

  <h3>ðŸ“¦ GÃ¼nlÃ¼k Ä°ÅŸletme DaÄŸÄ±tÄ±mÄ±: <span id="isletmeGunluk">0</span> â‚º</h3>
</div>

<button onclick="gunSonu()">ðŸ“Š GÃ¼n Sonu & Excel</button>

<script>
let data = JSON.parse(localStorage.getItem("kuryeSistem")) || {
  kurye:[], isletme:[]
};

function save(){localStorage.setItem("kuryeSistem",JSON.stringify(data))}

function showTab(t){
 kurye.style.display=t=="kurye"?"block":"none";
 isletme.style.display=t=="isletme"?"block":"none";
 tKurye.className=t=="kurye"?"active":"passive";
 tIsletme.className=t=="isletme"?"active":"passive";
}

function kuryeEkle(){
 let ad=k_ad.value, p=+k_paket.value, u=+k_ucret.value;
 let t=p*u;
 data.kurye.push({ad,borc:-t,gunluk:t});
 save(); render();
}

function kuryeOdeme(){
 let k=data.kurye.find(x=>x.ad==k_odeme_ad.value);
 if(!k) return;
 k.borc+=+k_odeme.value;
 save(); render();
}

function isletmeEkle(){
 let ad=i_ad.value, p=+i_paket.value, u=+i_ucret.value;
 let t=p*u;
 data.isletme.push({ad,borc:t,gunluk:t});
 save(); render();
}

function isletmeOdeme(){
 let i=data.isletme.find(x=>x.ad==i_odeme_ad.value);
 if(!i) return;
 i.borc-=+i_odeme.value;
 save(); render();
}

function render(){
 kuryeList.innerHTML=""; isletmeList.innerHTML="";
 let kGun=0,iGun=0;

 data.kurye.forEach((k,i)=>{
  let icon=k.borc>0?"ðŸ”µ":k.borc<0?"ðŸ”´":"ðŸŸ¢";
  let cls=k.borc>0?"blue":k.borc<0?"red":"green";
  kGun+=k.gunluk;
  kuryeList.innerHTML+=`
   <div class="row ${cls}">
    ${icon} ${k.ad} : ${k.borc} â‚º
    <button class="small" onclick="sil('kurye',${i})">ðŸ—‘</button>
   </div>`;
 });

 data.isletme.forEach((i,x)=>{
  let icon=i.borc>0?"ðŸ”´":"ðŸŸ¢";
  let cls=i.borc>0?"red":"green";
  iGun+=i.gunluk;
  isletmeList.innerHTML+=`
   <div class="row ${cls}">
    ${icon} ${i.ad} : ${i.borc} â‚º
    <button class="small" onclick="sil('isletme',${x})">ðŸ—‘</button>
   </div>`;
 });

 kuryeGunluk.innerText=kGun;
 isletmeGunluk.innerText=iGun;
}

function sil(t,i){
 if(!confirm("Silmek istiyor musun?"))return;
 data[t].splice(i,1); save(); render();
}

function gunSonu(){
 let wb=XLSX.utils.book_new();
 let ws=XLSX.utils.json_to_sheet([
  ...data.kurye.map(k=>({Tip:"Kurye",Ad:k.ad,Borc:k.borc})),
  ...data.isletme.map(i=>({Tip:"Ä°ÅŸletme",Ad:i.ad,Borc:i.borc}))
 ]);
 XLSX.utils.book_append_sheet(wb,ws,new Date().toLocaleDateString());
 XLSX.writeFile(wb,"Gunluk_Takip.xlsx");
}

function loadData(){render()}
</script>

</body>
</html>
