<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kurye & Ä°ÅŸletme Takip</title>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

<style>
:root{
 --bg:#0f172a;--card:#1e293b;--soft:#334155;
 --blue:#3b82f6;--red:#ef4444;--green:#22c55e;--text:#e5e7eb
}
*{box-sizing:border-box}
body{
 background:var(--bg);
 color:var(--text);
 font-family:sans-serif;
 margin:0;
}

/* ğŸ” LOGIN */
#login{
 position:fixed;
 inset:0;
 display:flex;
 align-items:center;
 justify-content:center;
 background:#020617;
 z-index:999;
}
#login .card{
 width:90%;
 max-width:320px;
 text-align:center;
}

/* APP */
#app{padding:10px}
input,select,button{border:none;border-radius:8px;padding:8px;margin:4px 0}
input,select{background:var(--soft);color:#fff}
button{background:var(--blue);color:#fff;font-weight:bold}
button.warn{background:#facc15;color:#000}
button.small{padding:4px 6px;font-size:12px}
.card{background:var(--card);padding:10px;border-radius:10px;margin-bottom:10px}
.tabbar{display:flex;gap:6px;margin-bottom:10px}
.tabbar button{flex:1}
.active{background:var(--blue)}
.hidden{display:none}
table{width:100%;font-size:12px;border-collapse:collapse;margin-top:6px}
th,td{padding:6px;border-bottom:1px solid var(--soft);text-align:center}
.logo{text-align:center;font-size:48px;margin:5px 0}
.summary{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.summary-card{background:#020617;padding:12px;border-radius:14px}
.pay{border-left:4px solid var(--red)}
.get{border-left:4px solid var(--green)}
.input-row{display:flex;gap:6px;flex-wrap:wrap}
.input-row input{flex:1}
.actions button{margin:0 2px}
</style>
</head>

<body>

<!-- ğŸ” ÅÄ°FRE -->
<div id="login">
 <div class="card">
  <h2>ğŸ” GiriÅŸ</h2>
  <input type="password" id="sifre" placeholder="Åifre">
  <button onclick="giris()">GÄ°RÄ°Å</button>
 </div>
</div>

<div id="app" class="hidden">

<div class="logo" id="logo">ğŸ›µ</div>

<div class="tabbar">
 <button id="tKurye" class="active" onclick="tab('kurye')">ğŸ›µ KURYELER</button>
 <button id="tIsletme" onclick="tab('isletme')">ğŸ• Ä°ÅLETMELER</button>
</div>

<div id="kurye"></div>
<div id="isletme" class="hidden"></div>

<div class="card">
 <b>ğŸ’³ Ã–DEME</b>
 <select id="odemeTip">
  <option value="kurye">Kurye</option>
  <option value="isletme">Ä°ÅŸletme</option>
 </select>
 <select id="odemeAd"></select>
 <input type="number" id="odemeTutar" placeholder="Tutar">
 <button style="width:100%" onclick="odemeGir()">Ã–DEME YAP</button>

 <div class="summary">
  <div class="summary-card pay">Kuryelere: <b id="topKurye">0 â‚º</b></div>
  <div class="summary-card get">Ä°ÅŸletmelerden: <b id="topIsletme">0 â‚º</b></div>
 </div>
</div>

<div style="display:flex;gap:6px">
 <button class="warn" style="flex:1" onclick="gunSonu()">GÃœN SONU AL</button>
 <button style="flex:1" onclick="excelAktar()">ğŸ“¤ EXCEL AKTAR</button>
</div>

</div>

<script>
const DOGRU_SIFRE="1234";

function giris(){
 if(sifre.value===DOGRU_SIFRE){
  login.style.display="none";
  app.classList.remove("hidden");
 }else alert("Åifre yanlÄ±ÅŸ");
}

let data=JSON.parse(localStorage.getItem("takip"))||{kurye:[],isletme:[]};
let devir=JSON.parse(localStorage.getItem("devir"))||{kurye:[],isletme:[]};
let odemeler=JSON.parse(localStorage.getItem("odemeler"))||[];
let last={kurye:{paket:'',ucret:''},isletme:{paket:'',ucret:''}};

function save(){
 localStorage.setItem("takip",JSON.stringify(data));
 localStorage.setItem("devir",JSON.stringify(devir));
 localStorage.setItem("odemeler",JSON.stringify(odemeler));
 render();
}

function tab(x){
 kurye.classList.add("hidden");
 isletme.classList.add("hidden");
 tKurye.classList.remove("active");
 tIsletme.classList.remove("active");
 document.getElementById(x).classList.remove("hidden");
 document.getElementById("t"+x.charAt(0).toUpperCase()+x.slice(1)).classList.add("active");
 logo.innerText=x==="kurye"?"ğŸ›µ":"ğŸ•";
}

/* GERÄ° KALAN TÃœM FONKSÄ°YONLAR AYNI */
